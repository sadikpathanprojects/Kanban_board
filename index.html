<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Kanban + Notes App</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e1e;
      color: #fff;
      margin: 0;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin-bottom: 20px;
    }
    .board {
      display: flex;
      justify-content: space-around;
      align-items: flex-start;
      flex-wrap: wrap;
      gap: 20px;
    }
    .column {
      background: #2c2c2c;
      border-radius: 8px;
      padding: 10px;
      width: 220px;
      min-height: 250px;
    }
    .column h2 {
      margin-top: 0;
    }
    .task {
      background: #444;
      margin: 8px 0;
      padding: 8px;
      border-radius: 6px;
      cursor: grab;
      display: flex;
      align-items: center;
    }
    .handle {
      margin-right: 8px;
      cursor: grab;
    }
    .task-text {
      flex: 1;
      text-align: left;
    }
    .task-edit-input {
      flex: 1;
      padding: 5px;
      border: none;
      border-radius: 4px;
      background: #333;
      color: #fff;
      font-size: 14px;
    }
    input, button, textarea {
      margin: 5px;
      padding: 8px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
    }
    button {
      cursor: pointer;
      background: #4CAF50;
      color: white;
    }
    button:hover {
      background: #45a049;
    }
    textarea {
      width: 100%;
      max-width: 800px;
      height: 200px; /* Bigger note area */
      padding: 12px;
      border-radius: 8px;
      border: none;
      margin-bottom: 10px;
      font-size: 16px;
    }
    ul {
      list-style: none;
      padding: 0;
      max-width: 800px;
      width: 100%;
      margin: 0 auto;
    }
    li {
      background: #333;
      margin: 5px 0;
      padding: 10px;
      border-radius: 6px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    li span {
      white-space: pre-wrap;
      flex-grow: 1;
      margin-right: 10px;
      text-align: left;
    }
    .delete-btn, .edit-btn {
      background: none;
      border: none;
      font-size: 18px;
      cursor: pointer;
      margin-left: 5px;
    }
    .delete-btn {
      color: #ff4c4c;
    }
    .delete-btn:hover {
      color: #ff0000;
    }
    .edit-btn {
      color: #4CAF50;
    }
    .edit-btn:hover {
      color: #00ff00;
    }
    .footer {
      margin-top: 40px;
      font-size: 14px;
      color: #aaa;
      text-align: center;
    }
  </style>
</head>
<body>
  <h1>üìå Kanban Board</h1>
  <div>
    <input id="taskInput" placeholder="Enter task..." />
    <button onclick="addTask()">Add Task</button>
  </div>
  <div class="board">
    <div class="column" ondrop="drop(event)" ondragover="allowDrop(event)" data-column="todo">
      <h2>To Do</h2>
    </div>
    <div class="column" ondrop="drop(event)" ondragover="allowDrop(event)" data-column="inprogress">
      <h2>In Progress</h2>
    </div>
    <div class="column" ondrop="drop(event)" ondragover="allowDrop(event)" data-column="done">
      <h2>Done</h2>
    </div>
    <div class="column" ondrop="drop(event)" ondragover="allowDrop(event)" data-column="onhold">
      <h2>On Hold</h2>
    </div>
    <div class="column" ondrop="drop(event)" ondragover="allowDrop(event)" data-column="dustbin">
      <h2>üóëÔ∏è Dustbin</h2>
    </div>
  </div>

  <h1>üìù My Notes</h1>
  <textarea id="noteInput" placeholder="Type your note here..."></textarea><br>
  <button onclick="saveNote()">Save Note</button>
  <button onclick="exportNotes()">Export Notes</button>

  <h2>Saved Notes</h2>
  <ul id="notesList"></ul>

  <div class="footer">Created by Sadik Pathan</div>

  <script>
    // ---- Kanban Board ----
    function saveBoard() {
      const board = {};
      document.querySelectorAll(".column").forEach(col => {
        const key = col.getAttribute("data-column");
        board[key] = Array.from(col.querySelectorAll(".task-text")).map(t => t.innerText);
      });
      localStorage.setItem("kanban", JSON.stringify(board));
    }

    function loadBoard() {
      const data = JSON.parse(localStorage.getItem("kanban")) || {};
      for (const key in data) {
        const col = document.querySelector(`.column[data-column="${key}"]`);
        data[key].forEach(task => createTask(task, col));
      }
    }

    function createTask(text, column) {
      const task = document.createElement("div");
      task.className = "task";
      task.draggable = true;
      task.ondragstart = drag;

      const handle = document.createElement("span");
      handle.className = "handle";
      handle.innerText = "‚ò∞";

      const span = document.createElement("span");
      span.className = "task-text";
      span.innerText = text;
      makeTaskEditable(span);

      task.appendChild(handle);
      task.appendChild(span);
      (column || document.querySelector('[data-column="todo"]')).appendChild(task);
      saveBoard();
    }

    function makeTaskEditable(span) {
      span.addEventListener("click", function () {
        const currentText = span.innerText;
        const input = document.createElement("input");
        input.type = "text";
        input.value = currentText;
        input.className = "task-edit-input";
        span.replaceWith(input);
        input.focus();

        input.addEventListener("blur", function () {
          const newSpan = document.createElement("span");
          newSpan.className = "task-text";
          newSpan.innerText = input.value.trim() || currentText;
          makeTaskEditable(newSpan);
          input.replaceWith(newSpan);
          saveBoard();
        });

        input.addEventListener("keydown", function (e) {
          if (e.key === "Enter") input.blur();
        });
      });
    }

    function addTask() {
      const input = document.getElementById("taskInput");
      if (input.value.trim() !== "") {
        createTask(input.value.trim());
        input.value = "";
      }
    }

    function allowDrop(ev) { ev.preventDefault(); }
    function drag(ev) { ev.dataTransfer.setData("text", ev.target.outerHTML); ev.target.remove(); }
    function drop(ev) {
      ev.preventDefault();
      const data = ev.dataTransfer.getData("text");
      ev.target.closest(".column").insertAdjacentHTML("beforeend", data);
      const newTask = ev.target.closest(".column").lastElementChild;
      newTask.ondragstart = drag;
      makeTaskEditable(newTask.querySelector(".task-text"));
      saveBoard();
    }

    loadBoard();

    // ---- Notes App ----
    let notes = JSON.parse(localStorage.getItem("notes")) || [];
    let editIndex = -1;
    renderNotes();

    function saveNote() {
      const noteInput = document.getElementById("noteInput");
      const text = noteInput.value;
      if (text === "") return;

      if (editIndex === -1) {
        notes.push(text);
      } else {
        notes[editIndex] = text;
        editIndex = -1;
      }

      localStorage.setItem("notes", JSON.stringify(notes));
      noteInput.value = "";
      renderNotes();
    }

    function renderNotes() {
      const list = document.getElementById("notesList");
      list.innerHTML = "";
      notes.forEach((note, index) => {
        const li = document.createElement("li");
        li.innerHTML = `
          <span>${note}</span>
          <div>
            <button class="edit-btn" onclick="editNote(${index})">‚úèÔ∏è</button>
            <button class="delete-btn" onclick="deleteNote(${index})">‚ùå</button>
          </div>
        `;
        list.appendChild(li);
      });
    }

    function deleteNote(index) {
      notes.splice(index, 1);
      localStorage.setItem("notes", JSON.stringify(notes));
      renderNotes();
    }

    function editNote(index) {
      const noteInput = document.getElementById("noteInput");
      noteInput.value = notes[index];
      editIndex = index;
    }

    function exportNotes() {
      const content = notes.join("\n\n************************\n\n");
      const blob = new Blob([content], { type: "text/plain" });
      const url = URL.createObjectURL(blob);
      const a = document.createElement("a");
      a.href = url;
      a.download = "my_notes.txt";
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
    }
  </script>
</body>
</html>
